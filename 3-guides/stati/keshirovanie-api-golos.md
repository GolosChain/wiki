# üöÄ \[–ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ API golos\] –ó–∞–ø—É—Å–∫ –º–Ω–æ–∂–µ—Å—Ç–≤–∞ –º–Ω–æ–≥–æ–ø–æ—Ç–æ—á–Ω—ã—Ö –∂–∏–≤—ã—Ö —Å–∫—Ä–∏–ø—Ç–æ–≤ –Ω–∞ –æ–¥–Ω–æ–π –Ω–æ–¥–µ - —Ä–µ—à–µ–Ω–∏–µ –¥–ª—è –º–∞—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç–∏ –±–æ—Ç–æ–≤ –≥–æ–ª–æ—Å–∞

–ê–≤—Ç–æ—Ä: [@vik](https://golos.io/@vik)

**–°—É—Ç—å —Ä–µ—à–∞–µ–º–æ–π –ø—Ä–æ–±–ª–µ–º—ã:      
**![](https://imgp.golos.io/0x0/https://s17.postimg.org/byltwz7rh/image.png)

**–†–µ—à–µ–Ω–∏–µ:**

–í –∫–æ–Ω—Ü–µ –ø–æ—Å—Ç–∞ –±—É–¥–µ—Ç –ø—Ä–∏–≤–µ–¥–µ–Ω –ø—Ä–æ—Å—Ç–æ–π –∫–æ–¥ –¥–ª—è node.js –∫–æ—Ç–æ—Ä—ã–π –ø–æ–∑–≤–æ–ª–∏—Ç –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Ä–∞–±–æ—Ç—É –º–Ω–æ–∂–µ—Å—Ç–≤–∞ —Å–∫—Ä–∏–ø—Ç–æ–≤ –Ω–∞ –æ–¥–Ω–æ–π –Ω–æ–¥–µ.

![](https://imgp.golos.io/0x0/https://s2.postimg.org/qf2uq63pz/image.png)

–í –ø–æ—Å–ª–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è –º–æ–∏–º–∏ [—Ç–µ–ª–µ–≥—Ä–∞–º –±–æ—Ç–∞–º–∏ –¥–ª—è –≥–æ–ª–æ—Å–æ–≤–∞–Ω–∏—è](https://golos.io/ru--boty/@vik/vozobnovlenie-raboty-kuratorskikh-botov-dlya-telegram) –ø–æ–ª—å–∑—É—é—Ç—Å—è –≤—Å–µ –±–æ–ª—å—à–µ –ª—é–¥–µ–π –∏ –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–æ –Ω–∞–≥—Ä—É–∑–∫–∞ –≤–æ–∑—Ä–æ—Å–ª–∞ –≤ 10-–∫–∏ —Ä–∞–∑ –ø–æ —Å—Ä–∞–≤–Ω–µ–Ω–∏—é –¥–∞–∂–µ —Å –ø—Ä–æ—à–ª—ã–º –º–µ—Å—è—Ü–µ–º. –Ø –ø–æ–¥–Ω—è–ª [–¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –Ω–æ–¥—ã](https://golos.io/ru--golos/@vik/etika-botovodstva-na-golose-i-ekonomiya-resursa-pablik-nod-robot-delegat-za-kotorogo-ne-nuzhno-golosovat), —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–∏–ª –Ω–∞–≥—Ä—É–∑–∫–∏, –¥–æ–±–∞–≤–∏–ª –º–æ—â–Ω–æ—Å—Ç–∏ —Å–µ—Ä–≤–µ—Ä–∞–º, –Ω–æ —É–∑–∫–æ–µ –º–µ—Å—Ç–æ –æ–∫–∞–∑–∞–ª–æ—Å—å –≤ —Å–∞–º–æ–π –ø—Ä–æ–ø—É—Å–∫–Ω–æ–π —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ –Ω–æ–¥.

–û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ –Ω–∞ —Å–∫—Ä–∏–Ω, —Ç–∞–º –∏–∑—Ä–µ–¥–∫–∞ –º–µ–ª—å–∫–∞—é—Ç —Å—Ç—Ä–æ–∫–∏ –±–µ–ª–æ–≥–æ —Ü–≤–µ—Ç–∞. –≠—Ç–æ —á–µ—Ä–µ–¥–∞ –Ω–æ–≤—ã—Ö –±–ª–æ–∫–æ–≤. –ñ–µ–ª—Ç—ã–µ –∂–µ —Å—Ç—Ä–æ–∫–∏ - —ç—Ç–æ –æ–±—Ä–∞—â–µ–Ω–∏–µ –∫ –Ω–æ–¥–µ.

![](https://imgp.golos.io/0x0/https://s21.postimg.org/5qtwcvmmt/blocks.gif)

–°–µ–π—á–∞—Å –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ —Ä–∞–±–æ—Ç–∞—é—Ç –ø—Ä–∏–º–µ—Ä–Ω–æ 10 –±–æ—Ç–æ–≤, –≤ –∫–∞–∂–¥–æ–º –ø—Ä–∏–º–µ—Ä–Ω–æ 20 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, —ç—Ç–æ 200 –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –∫–∞–∂–¥—ã–µ 3 —Å–µ–∫—É–Ω–¥—ã 24/7. –¢–∞–∫—É—é –Ω–∞–≥—Ä—É–∑–∫—É –Ω–æ–¥–∞ –æ—á–µ–Ω—å —á–∞—Å—Ç–æ –Ω–µ –≤—ã–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∏ –±–æ—Ç—ã –ø—Ä–æ–ø—É—Å–∫–∞—é—Ç —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –∏–ª–∏ —Å—Ç–∞–Ω–æ–≤—è—Ç—Å—è –Ω–∞ –≤—ã–Ω—É–∂–¥–µ–Ω–Ω—É—é –ø–∞—É–∑—É, –∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —Å–µ—Ä–¥—è—Ç—Å—è –Ω–∞ –Ω–µ—Å–æ–≤–µ—Ä—à–µ–Ω—Å—Ç–≤–æ —Å–∫—Ä–∏–ø—Ç–æ–≤ :\)

–¢–∞–∫ –∫–∞–∫ –∫–∞–∂–¥—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –±–æ—Ç–∞ "–æ–ø—Ä–∞—à–∏–≤–∞–µ—Ç" –Ω–æ–≤—ã–µ –±–ª–æ–∫–∏ —Å –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–º –≤ 3 —Å–µ–∫—É–Ω–¥—ã, —Ç–æ —Å–¥–µ–ª–∞—Ç—å —Ä–∞–±–æ—Ç—É –∫–æ–º—Ñ–æ—Ä—Ç–Ω–æ–π –º–æ–∂–Ω–æ –ª–∏–±–æ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—è –ø–æ –Ω–æ–¥–µ –Ω–∞ –∫–∞–∂–¥—ã—Ö 20-30 —á–µ–ª–æ–≤–µ–∫, —á—Ç–æ —ç–∫–æ–Ω–æ–º–∏—á–µ—Å–∫–∏ –∞–±—Å—É—Ä–¥–Ω–æ, –ª–∏–±–æ **–ø–µ—Ä–µ—Å–º–æ—Ç—Ä–µ—Ç—å –ø—Ä–∏–Ω—Ü–∏–ø—ã —Ä–∞–±–æ—Ç—ã —Å –æ–ø—Ä–∞—à–∏–≤–∞–Ω–∏–µ–º –±–ª–æ–∫–æ–≤**.

–†–µ—à–µ–Ω–∏–µ —è –≤—ã–±—Ä–∞–ª —Ç–∞–∫–æ–µ:

–í–º–µ—Å—Ç–æ —Å–æ—Ç–µ–Ω –æ—Ç–¥–µ–ª—å–Ω—ã—Ö —Å–µ—Å—Å–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Ä–∞–±–æ—Ç–∞–µ—Ç **—Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω –û–¢–î–ï–õ–¨–ù–´–ô —Å–∫—Ä–∏–ø—Ç, **–∫–æ—Ç–æ—Ä—ã–π –æ–ø—Ä–∞—à–∏–≤–∞–µ—Ç –±–ª–æ–∫–∏. –ò —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –¥–∞–Ω–Ω—ã–µ –±–ª–æ–∫–∞ –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö Redis, –≤—Å–µ —ç—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –∑–∞ –¥–æ–ª–∏ –º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥, —Ç–∞–∫ –∫–∞–∫ redis –ø—Ä–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–µ –Ω–µ –ø—Ä–æ—Å—Ç–æ –±–∞–∑–∞, –∞ –º–æ—â–Ω—ã–π –∫–µ—à–∏—Ä—É—é—â–∏–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç.  
–î–∞–ª–µ–µ, –∫–∞–∂–¥—ã–π –∏–∑ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –±–æ—Ç–∞ –æ–±—Ä–∞—â–∞–µ—Ç—Å—è –Ω–µ –∫ –Ω–æ–¥–µ, –∞ —É–∂–µ –∫ redis, —á—Ç–æ –±—ã –ø–æ–ª—É—á–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –±–ª–æ–∫–∞ —Å –æ–ø–µ—Ä–∞—Ü–∏—è–º–∏ –±–ª–æ–∫—á–µ–π–Ω–∞. –¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, –Ω–∞–≥—Ä—É–∑–∫–∞ –¥–æ–ª–∂–Ω–∞ —É–ø–∞—Å—Ç—å –≤ 10-–∫–∏, –∞ —Ç–æ –∏ –±–æ–ª—å—à–µ —Ä–∞–∑.

**–†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞–º –∏ –≤–ª–∞–¥–µ–ª—å—Ü–∞–º –Ω–æ–¥**

–°—É—Ç—å –º–µ—Ç–æ–¥–∞ –ø—Ä–æ—Å—Ç–∞—è, –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ —Ä–∞–±–æ—Ç–∞–µ—Ç javascript –∫–æ—Ç–æ—Ä—ã–π —Å –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–º –≤ 3 —Å–µ–∫—É–Ω–¥—ã –æ–±–Ω–æ–≤–ª—è–µ—Ç –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Å–≤–µ–∂–µ–≥–æ –±–ª–æ–∫–∞ –Ω–∞ golos.io  
–î–∞–ª–µ–µ –≤–º–µ—Å—Ç–æ —Ç–æ–≥–æ, —á—Ç–æ –±—ã –ø–æ–¥–∫–ª—é—á–∞—Ç—å—Å—è –≤—Å–µ–º–∏ —Å–≤–æ–∏–º–∏ —Å–∫—Ä–∏–ø—Ç–∞–º–∏ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –∫ –æ–¥–Ω–æ–π –Ω–æ–¥–µ, –≤—ã –±–µ—Ä–µ—Ç–µ –¥–∞–Ω–Ω—ã–µ –æ –±–ª–æ–∫–∞—Ö –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö, –∞ –Ω–æ–¥–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–π –Ω–∞–≥—Ä—É–∑–∫–æ–π, —Å–ª–æ–≤–Ω–æ –µ–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ª–∏—à—å –æ–¥–∏–Ω —Å–∫—Ä–∏–ø—Ç.

–í—ã –º–æ–∂–µ—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ª—é–±—É—é –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö, –∫–∞–∫-—Ç–æ mongo, mysql, rethink –∏ –¥—Ä—É–≥–∏–µ, –¥–ª—è —Å–µ–±—è –∂–µ —è –≤—ã–±—Ä–∞–ª –∏–º–µ–Ω–Ω–æ redis, –¥–ª—è –º–µ–Ω—è –æ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç, —Å–ø–æ—Å–æ–±–Ω—ã–π –¥–µ—Ä–∂–∞—Ç—å –Ω–∞–≥—Ä—É–∑–∫—É –≤–æ –≤—Ä–µ–º—è –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è –±–æ–ª—å—à–æ–≥–æ –æ–±—ä–µ–º–∞ –¥–∞–Ω–Ω—ã—Ö.

![](https://imgp.golos.io/0x0/https://redislabs.com/wp-content/uploads/2014/04/redis_proven_performance_2.png)

–í–µ—Å—å –∫–æ–¥ –¥–ª—è –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–≥–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —Ç–µ–∫—É—â–µ–≥–æ –±–ª–æ–∫–∞ –≤ redis —É–º–µ—Å—Ç–∏–ª—Å—è –≤ –Ω–µ—Å–∫–æ–ª—å–∫–æ –¥–µ—Å—è—Ç–∫–æ–≤ —Å—Ç—Ä–æ–∫

![](https://imgp.golos.io/0x0/https://s13.postimg.org/tii4r8vad/code.jpg)

    require('events').EventEmitter.prototype._maxListeners = 100000
    const Promise = require("bluebird")
    const _ = require('lodash')
    const golos = require("golos-js")
    const redis = require("redis")
    const client = redis.createClient()
    golos.config.set('websocket','ws://localhost:9090')
    let trig = {existBlock:true}
    const dynamicSnap = new Promise((resolve, reject) =>
     {
        golos.api.getDynamicGlobalProperties((err, res) =>
     {
            if (err) {console.log(err)}
            else {
                resolve(res)
            }
        })
    })
    const FIRSTBLOCK = n =>
     n.head_block_number
    const SENDBLOCK = currentblock =>
     {
        golos.api.getBlock(currentblock, (err, result) =>
     {
            if (err) {
                console.log(err) 
                }   else if (result === null){
                    trig.existBlock = false
                    }else {
            let JSONblock = JSON.stringify(result)
            client.hmset("GolosLastBlock", "data",JSONblock);
            console.log(JSONblock)
            trig.existBlock = true
                }
        })
    }
    const NEXTBLOCKS = firstblock =>
     {
        let currentblock = firstblock
        setInterval(() =>
     {
    if(trig.existBlock){
    currentblock++
    }else{
    console.warn(`–ü—Ä–æ–±–ª–µ–º–∞ –±–ª–æ–∫–∞ ${currentblock}`)}
    SENDBLOCK(currentblock)
    }, 3000)
    }
    dynamicSnap
        .then(FIRSTBLOCK)
        .then(NEXTBLOCKS)
        .catch(e => console.log(e));

–î–∞–ª–µ–µ –≤–∞–º –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –±—Ä–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –±–ª–æ–∫–∞ –∏–∑ –±–∞–∑—ã redis

```
client.hgetall("GolosLastBlock", function(err, LB) {
let LastBlockRedis = JSON.parse(LB.data)
            filterOperations(LastBlockRedis)
}
```

–ì–¥–µ –ø—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ—Ç—Å—è, —á—Ç–æ —Ñ—É–Ω–∫—Ü–∏—è filterOperations –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è –≤–∞—à–∏–º —Å–∫—Ä–∏–ø—Ç–æ–º.

> –ü–æ –º–∞—Ç–µ—Ä–∏–∞–ª–∞–º [—Å—Ç–∞—Ç—å–∏](https://golos.io/ru--golos/@vik/zapusk-mnozhestva-mnogopotochnykh-zhivykh-skriptov-na-odnoi-node-reshenie-dlya-mashtabiruemosti-botov-golosa).
>
> –ê–≤—Ç–æ—Ä [@vik](https://golos.io/@vik)



